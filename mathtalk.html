<head>
  <title>Mathtalk</title>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>

<body>
  {{> topo}}
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span10 offset1">
          {{> base}}
          {{> corpo}}
        </div>
      </div>
    </div>
</body>

<template name="topo">
  {{loginButtons}}
  {{#if dentrodesala}}
  <a id="sair-sala" href="#" class="pull-right">Sair da sala</a>
  {{/if}}
  <div class="horizontal-divider"></div>
</template>

<template name="corpo">
	{{#if dentrodesala}}
		{{> sala}}
	{{/if}}
	{{#if foradesala}}
  		{{> entrada}}
  	{{/if}}
</template>

<template name="base">
</template>

<template name="sala">
  <div id="cabecalho" class="span12">
    <dl>
      <div class="span4">
        <dt>Codigo</dt>
        <dd>{{codigo}}</dd>
      </div>
      <div class="span4">
        <dt>Membros</dt>
        <dd>
          <ul>
            {{#each membros}}
              <li>{{username}}</li>
            {{/each}}
          </ul>
        </dd>  
      </div>
    </dl>
  </div>
  <div id="mensagens" class="span12">
    <ul>
    {{#each messages}}
      <li>{{> messagebody}}</li>
    {{/each}}
    </ul>
  </div>
  {{> painel}}
</template>

<template name="painel">
  <div id="botoes" class="span12" style="height: 5px;font-size: 0px;">
    <img id="button-inline-math" class="botao" src="/buttons/Button_int_link.png"/>
    <img id="button-math" class="botao" src="/buttons/Button_int_link.png"/>
    <span class="divider"></span>
    <img id="button-integral" class="botao" src="/buttons/Button_integral.png"/>
    <img id="button-fraction" class="botao" src="/buttons/Button_fraction.png"/>
    <img id="button-limit" class="botao" src="/buttons/Button_lim.png"/>
    <span class="divider"></span>
    <img id="button-sum" class="botao" src="/buttons/Button_sigma.png"/>
    <img id="button-sqrt" class="botao" src="/buttons/Button_sqrt.png"/>
    <span class="divider"></span>
    <img id="button-alpha" class="botao" src="/buttons/Button_alpha.png"/>
    <img id="button-beta" class="botao" src="/buttons/Button_beta.png"/>
    <img id="button-theta" class="botao" src="/buttons/Button_theta.png"/>
  </div>
  <div id="entrada-de-mensagens" class="span12">
    <textarea id="mensagem-enviar" class="span10 pull-left" style="height: 100px; float: left;"/>
    <div class="span2">
      <div class="btn-group btn-block btn-group-vertical">
        <button type="button" id="mode-enter" class="btn btn-primary btn-block {{enterModeActivated}}">Modo Enter</button>
        <button type="button" id="mode-math" class="btn btn-primary btn-block {{mathModeActivated}}">Modo Math</button>
      </div>
      <button id="enviar-mensagem" class="btn btn-success btn-block">Enviar</button>
    </div>
  </div>
</template>

<template name="messagebody">
  <p class="cinza">{{sender}} disse:</p>
  <p>{{body}}</p>
</template>